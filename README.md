# Сервис показа курса валют к рублю

## Запуск проекта
После того как скачали к себе локально выполните следующие шаги для того, что бы заработал этот проект.

1. Настройте домен для этого проекта указав корневую папку на `api/web`;
2. Перейдите к корневой папке проекта в консоле и выполните команду `composer install`;
3. После того как скачались все зависимые пакеты, выполните команду `php init` и выберите желаемую среду вводя соответсвующую цыфру;
4. Найдите файл `.env.example` в корневой папке и сделайте копию от него с новым названием `.env`. Откройте этот новый файл и введите в значение переменных свои параметры среды разработки;
5. После этого выполните команду `./yii migrate` чтобы применить миграции к базе данных.
6. Готово! Можете пользоватся API ранее настроенному домену.

## Точки запросов API

`domain.com/currencies` - Запрос списка валют с постраничным переходом

**Параметры запроса:**
* `page={number}` - переход по выбранной странице;
* `per-page={number}` - количество элементов в одной странице. По умолчанию - 20;

**Структура ответа:**
```json
{
  "items": [
    {
      "id": 5,
      "code": "BYN",
      "name": "Белорусский рубль",
      "rate": 28.9001,
      "insert_dt": "2020-12-04 22:35:28"
    },
    ...
  ],
  "_links": {
    "self": {
      "href": "http://api.cur.loc/currencies?per-page=2&page=3"
    },
    "first": {
      "href": "http://api.cur.loc/currencies?per-page=2&page=1"
    },
    "last": {
      "href": "http://api.cur.loc/currencies?per-page=2&page=17"
    },
    "prev": {
      "href": "http://api.cur.loc/currencies?per-page=2&page=2"
    },
    "next": {
      "href": "http://api.cur.loc/currencies?per-page=2&page=4"
    }
  },
  "_meta": {
    "totalCount": 34,
    "pageCount": 17,
    "currentPage": 3,
    "perPage": 2
  }
}
```
`domain.com/currency/{code}` - Запрос одной валюты по символному коду. Передаёт ошибку 404 если валюта не найдена

**Структура ответа**
```json
{
  "id": 11,
  "code": "USD",
  "name": "Доллар США",
  "rate": 74.2529,
  "insert_dt": "2020-12-04 22:35:28"
}
```

## Консольная команда

`path/to/yii currency/parse` - Команда для обновления курсов валют к рублю
